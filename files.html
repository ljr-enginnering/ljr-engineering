<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LJR Engineering | 자료실</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700;800&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="brand" onclick="location.href='index.html'">
        <span class="brand-mark">LJR</span>
        <span class="brand-sub">ENGINEERING</span>
      </div>
      <nav class="nav">
        <a href="about.html">소개</a>
        <a href="services.html">전문 분야</a>
        <a href="board.html">기술 노트</a>
        <a href="files.html">자료실</a>
        <a href="contact.html">문의</a>
      </nav>
      <button class="cta" onclick="location.href='contact.html'">상담 문의</button>
    </div>
  </header>

  <main>
    <section class="section">
      <div class="container section-header">
        <p class="eyebrow">RESOURCES</p>
        <h2>자료실</h2>
        <p class="lead">도면, 계산서, 체크리스트를 업로드하고 관리하세요. 데이터는 브라우저에 저장됩니다.</p>
      </div>
      <div class="container files">
        <div class="upload-card">
          <div class="icon circle">⬆️</div>
          <p>PDF, XLSX, DOCX 등 파일을 추가하세요.</p>
          <input id="file-input" type="file" />
          <button class="btn primary" onclick="handleFileUpload()">업로드</button>
        </div>
        <div id="file-list" class="file-list"></div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container footer-inner">
      <div>
        <div class="brand small">
          <span class="brand-mark">LJR</span>
          <span class="brand-sub">ENGINEERING</span>
        </div>
        <p class="muted-text">Cold Forging · Plastic Working · Machining Design</p>
      </div>
      <p class="muted-text">© <span id="year"></span> LJR Engineering. All rights reserved.</p>
    </div>
  </footer>

  <script>
    const FILE_KEY = 'ljr_files_v2';
    const defaultFiles = [
      { id: 'f1', name: 'Cold_Forging_Checklist.pdf', size: '1.2 MB', date: '2024-12-20' },
      { id: 'f2', name: 'Press_Tonnage_Calc.xlsx', size: '0.8 MB', date: '2024-12-22' }
    ];

    function loadFiles() {
      const raw = localStorage.getItem(FILE_KEY);
      if (!raw) { localStorage.setItem(FILE_KEY, JSON.stringify(defaultFiles)); return defaultFiles; }
      try { return JSON.parse(raw); } catch { return defaultFiles; }
    }
    function saveFiles(files) { localStorage.setItem(FILE_KEY, JSON.stringify(files)); }

    function renderFiles() {
      const list = document.getElementById('file-list');
      const files = loadFiles();
      if (!files.length) { list.innerHTML = '<div class="empty">업로드된 자료가 없습니다.</div>'; return; }
      list.innerHTML = files.map(f => `
        <div class="file">
          <div>
            <p class="file-name">${f.name}</p>
            <p class="file-meta">${f.size} · ${f.date}</p>
          </div>
          <button class="delete" onclick="deleteFile('${f.id}')">×</button>
        </div>
      `).join('');
    }

    function handleFileUpload() {
      const input = document.getElementById('file-input');
      const file = input.files && input.files[0];
      if (!file) return alert('파일을 선택하세요.');
      const files = loadFiles();
      const newFile = {
        id: `f${Date.now()}`,
        name: file.name,
        size: `${(file.size / (1024 * 1024)).toFixed(2)} MB`,
        date: new Date().toISOString().slice(0, 10),
      };
      saveFiles([newFile, ...files]);
      input.value = '';
      renderFiles();
    }

    function deleteFile(id) {
      const files = loadFiles().filter(f => f.id !== id);
      saveFiles(files);
      renderFiles();
    }

    document.getElementById('year').textContent = new Date().getFullYear();
    renderFiles();
  </script>
</body>
</html>
